{% extends "base.html" %} {% load static %} {% block content %}

<!-- Page content -->
<main class="content-wrapper">
    <!-- Hero slider -->
    <section class="container pt-4">
        <div class="row">
            <div class="col-lg-9 offset-lg-3">
                <div class="position-relative">
                    <span
                        class="position-absolute top-0 start-0 w-100 h-100 rounded-5 d-none-dark rtl-flip"
                        style="
                            background: linear-gradient(
                                90deg,
                                #accbee 0%,
                                #e7f0fd 100%
                            );
                        "
                    ></span>
                    <span
                        class="position-absolute top-0 start-0 w-100 h-100 rounded-5 d-none d-block-dark rtl-flip"
                        style="
                            background: linear-gradient(
                                90deg,
                                #1b273a 0%,
                                #1f2632 100%
                            );
                        "
                    ></span>
                    <div
                        class="row justify-content-center position-relative z-2"
                    >
                        <div
                            class="col-xl-5 col-xxl-4 offset-xxl-1 d-flex align-items-center mt-xl-n3"
                        >
                            <!-- Text content master slider -->
                            <div
                                class="swiper px-5 pe-xl-0 ps-xxl-0 me-xl-n5"
                                data-swiper='{
                                    "spaceBetween": 64,
                                    "loop": true,
                                    "speed": 400,
                                    "controlSlider": "#sliderImages",
                                    "autoplay": {
                                        "delay": 5500,
                                        "disableOnInteraction": false
                                    },
                                    "scrollbar": {
                                        "el": ".swiper-scrollbar"
                                    }
                                }'
                            >
                                <div class="swiper-wrapper">
                                    {% for banner in headerBanners %}
                                    <div
                                        class="swiper-slide text-center text-xl-start pt-5 py-xl-5"
                                    >
                                        <p class="text-body">
                                            {{ banner.description }}
                                        </p>
                                        <h2 class="display-4 pb-2 pb-xl-4">
                                            {{ banner.title }}
                                        </h2>
                                        <a
                                            class="btn btn-lg btn-primary"
                                            href="{{ banner.link }}"
                                        >
                                            {{ banner.button_text }}
                                            <i
                                                class="ci-arrow-up-right fs-lg ms-2 me-n1"
                                            ></i>
                                        </a>
                                    </div>
                                    {% endfor %}
                                </div>
                            </div>
                        </div>

                        <div class="col-9 col-sm-7 col-md-6 col-lg-5 col-xl-7">
                            <!-- Binded images (controlled slider) -->
                            <div
                                class="swiper user-select-none"
                                id="sliderImages"
                                data-swiper='{
                                    "allowTouchMove": false,
                                    "loop": true,
                                    "effect": "fade",
                                    "fadeEffect": {
                                        "crossFade": true
                                    }
                                }'
                            >
                                <div class="swiper-wrapper">
                                    {% for banner in headerBanners %}
                                    <div
                                        class="swiper-slide d-flex justify-content-end"
                                    >
                                        <div
                                            class="ratio rtl-flip"
                                            style="
                                                max-width: 495px;
                                                --cz-aspect-ratio: calc(
                                                    537 / 495 * 100%
                                                );
                                            "
                                        >
                                            <img
                                                src="{{ banner.image.url }}"
                                                alt="{{ banner.alt_text }}"
                                            />
                                        </div>
                                    </div>
                                    {% endfor %}
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Scrollbar -->
                    <div
                        class="row justify-content-center"
                        data-bs-theme="dark"
                    >
                        <div class="col-xxl-10">
                            <div class="position-relative mx-5 mx-xxl-0">
                                <div class="swiper-scrollbar mb-4"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- New arrivals (List) -->
    <section class="container pt-5 mt-1 mt-sm-2 mt-md-3 mt-lg-4">
        <h2 class="h3 pb-2 pb-sm-3">بهترین محصولات سایت</h2>
        <div class="row">
            {% for banner in NewProductsBanner %}
            <!-- Banner -->
            <div class="col-lg-4" data-bs-theme="dark">
                <div
                    class="d-flex flex-column align-items-center justify-content-end h-100 text-center overflow-hidden rounded-5 px-4 px-lg-3 pt-4 pb-5"
                >
                    <div
                        class="ratio animate-up-down position-relative z-2 me-lg-4"
                        style="
                            max-width: 320px;
                            margin-bottom: -19%;
                            --cz-aspect-ratio: calc(690 / 640 * 100%);
                        "
                    >
                        <img
                            src="{{ banner.image.url }}"
                            alt="{{ banner.alt_text }}"
                        />
                    </div>
                    <h3 class="display-2 mb-2">{{ banner.title }}</h3>
                    <p class="text-body fw-medium mb-4">
                        {{ banner.description|linebreaksbr|safe }}
                    </p>
                    <a class="btn btn-sm btn-primary" href="{{ banner.link }}">
                        {{ banner.button_text }}
                        <i class="ci-arrow-up-right fs-base ms-1 me-n1"></i>
                    </a>
                </div>
            </div>
            {% endfor %}

            <!-- Product list column 1 -->
            <div
                class="col-sm-6 col-lg-4 d-flex flex-column gap-3 pt-4 py-lg-4"
            >
                {% for product in newProducts1 %}
                <div
                    class="position-relative animate-underline d-flex align-items-center ps-xl-3"
                >
                    <div
                        class="ratio ratio-1x1 flex-shrink-0"
                        style="width: 110px"
                    >
                        {% with media=product.media.all|first %} {% if media %}
                        <img
                            src="{{ media.thumbnail.url }}"
                            alt="{{ product.name }}"
                        />
                        {% else %}
                        <img
                            src="{% static 'img/default-prodct.png' %}"
                            alt="{{ product.name }}"
                        />
                        {% endif %} {% endwith %}
                    </div>
                    <div class="w-100 min-w-0 ps-2 ps-sm-3">
                        <div class="d-flex align-items-center gap-2 mb-2">
                            <div class="d-flex gap-1 fs-xs">
                                {% for i in '12345' %} {% if product.rating >=
                                forloop.counter %}
                                <i class="ci-star-filled text-warning"></i>
                                {% elif product.rating >=
                                forloop.counter0|add_decimal:'0.5' %}
                                <i class="ci-star-half text-warning"></i>
                                {% else %}
                                <i class="ci-star text-warning"></i>
                                {% endif %} {% endfor %}
                            </div>
                            <span class="text-body-tertiary fs-xs">
                                {{ product.rating }}
                            </span>
                        </div>
                        <h4 class="mb-2">
                            <a
                                class="stretched-link d-block fs-sm fw-medium text-truncate"
                                href="{% url 'shop:product_detail' product.slug %}"
                            >
                                <span class="animate-target"
                                    >{{ product.name }}</span
                                >
                            </a>
                        </h4>
                        {% if product.discount_price %}
                        <div class="h5 mb-0">
                            {{ product.discount_price|to_price }}
                            <small>
                                <del class="text-body-tertiary fs-sm fw-normal">
                                    {{ product.price|to_price }}
                                </del>
                            </small>
                        </div>
                        {% else %}
                        <div class="h5 mb-0">{{ product.price|to_price }}</div>
                        {% endif %}
                    </div>
                </div>
                {% endfor %}
            </div>

            <!-- Product list column 2 -->
            <div
                class="col-sm-6 col-lg-4 d-flex flex-column gap-3 pt-4 py-lg-4"
            >
                {% for product in newProducts2 %}
                <div
                    class="position-relative animate-underline d-flex align-items-center ps-xl-3"
                >
                    <div
                        class="ratio ratio-1x1 flex-shrink-0"
                        style="width: 110px"
                    >
                        {% with media=product.media.all|first %} {% if media %}
                        <img
                            src="{{ media.thumbnail.url }}"
                            alt="{{ product.name }}"
                        />
                        {% else %}
                        <img
                            src="{% static 'img/default-prodct.png' %}"
                            alt="{{ product.name }}"
                        />
                        {% endif %} {% endwith %}
                    </div>
                    <div class="w-100 min-w-0 ps-2 ps-sm-3">
                        <div class="d-flex align-items-center gap-2 mb-2">
                            <div class="d-flex gap-1 fs-xs">
                                {% for i in '12345' %} {% if product.rating >=
                                forloop.counter %}
                                <i class="ci-star-filled text-warning"></i>
                                {% elif product.rating >=
                                forloop.counter0|add_decimal:'0.5' %}
                                <i class="ci-star-half text-warning"></i>
                                {% else %}
                                <i class="ci-star text-warning"></i>
                                {% endif %} {% endfor %}
                            </div>
                            <span class="text-body-tertiary fs-xs">
                                {{ product.rating }}
                            </span>
                        </div>
                        <h4 class="mb-2">
                            <a
                                class="stretched-link d-block fs-sm fw-medium text-truncate"
                                href="{% url 'shop:product_detail' product.slug %}"
                            >
                                <span class="animate-target"
                                    >{{ product.name }}</span
                                >
                            </a>
                        </h4>
                        {% if product.discount_price %}
                        <div class="h5 mb-0">
                            {{ product.discount_price|to_price }}
                            <small>
                                <del class="text-body-tertiary fs-sm fw-normal">
                                    {{ product.price|to_price }}
                                </del>
                            </small>
                        </div>
                        {% else %}
                        <div class="h5 mb-0">{{ product.price|to_price }}</div>
                        {% endif %}
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </section>

    {% if specialOffers %}
    <!-- Special offers (Carousel) -->
    <section class="container pt-5 mt-2 mt-sm-3 mt-lg-4">
        <!-- Heading + Countdown -->
        <div
            class="d-flex align-items-start align-items-md-center justify-content-between border-bottom pb-3 pb-md-4"
        >
            <div class="d-md-flex align-items-center">
                <h2 class="h3 pe-3 me-3 mb-md-0">پیشنهادات ویژه برای شما</h2>

                <!-- Replace 'demoDate' inside data-countdown-date attribute with the real date, ex: '10/15/2025 12:00:00' -->
                <div
                    class="d-flex align-items-center"
                    data-countdown-date='{{ nearestEnd|date:"m/d/Y H:i:s" }}'
                >
                    <div class="btn btn-primary pe-none px-2">
                        <span data-days=""></span>
                        <span>روز</span>
                    </div>
                    <div
                        class="animate-blinking text-body-tertiary fs-lg fw-medium mx-2"
                    >
                        :
                    </div>
                    <div class="btn btn-primary pe-none px-2">
                        <span data-hours=""></span>
                        <span>ساعت</span>
                    </div>
                    <div
                        class="animate-blinking text-body-tertiary fs-lg fw-medium mx-2"
                    >
                        :
                    </div>
                    <div class="btn btn-primary pe-none px-2">
                        <span data-minutes=""></span>
                        <span>دقیقه</span>
                    </div>
                </div>
            </div>
            <div class="nav ms-3">
                <a
                    class="nav-link animate-underline px-0 py-2"
                    href="{% url 'shop:shop_list' %}?specialOffers=true"
                >
                    <span class="animate-target text-nowrap">مشاهده همه</span>
                    <i class="ci-chevron-right fs-base ms-1"></i>
                </a>
            </div>
        </div>

        <!-- Product carousel -->
        <div>{% includes "index-includes/index-products-carousel.html" %}</div>
    </section>
    {% endif %}

    <!-- Brands -->
    <section
        class="container pt-4 pt-md-5 pb-5 mt-sm-2 mb-2 mb-sm-3 mb-md-4 mb-lg-5"
    >
        <div
            class="row row-cols-2 row-cols-sm-3 row-cols-md-4 row-cols-lg-6 g-3 g-md-4 g-lg-3 g-xl-4"
        >
            {% for brand in brands %}
            <div class="col">
                <a
                    class="btn btn-outline-secondary w-100 rounded-4 p-3"
                    href="{% url 'shop:shop_list' %}?brand={{ brand.slug }}"
                >
                    <img
                        src="{{ brand.img.url }}"
                        class="d-none-dark"
                        alt="{{ brand.name }}"
                    />
                    <img
                        src="{{ brand.img.url }}"
                        class="d-none d-block-dark"
                        alt="{{ brand.name }}"
                    />
                </a>
            </div>
            {% endfor %}
        </div>
    </section>
</main>

{% endblock %}
